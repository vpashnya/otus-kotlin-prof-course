# API

#### 1. Сущности
**Интеграционный поток (IntegrationStream)**

| Поле            | Бизнес-описание                             | Пример значения                                      |
|-----------------|---------------------------------------------|------------------------------------------------------|
| id              | Идентификатор записи интеграционного потока | "1234"                                               |
| class           | Класс                                       | "KRED_CORP"                                          |
| method          | Метод                                       | "LIB.getProcentRate"                                 |
| active          | Включен ли поток                            | "true"                                               |
| transportParams | Параметры транспорта                        | {"http" : "\KredCorpLibGetProcentRate"}              | 
| description     | Описание интеграционного потока             | "Получение процентной ставки по кредитному договору" |

**Доступ к интеграционному потоку (AccessToIntegrationStream)**

| Поле                  | Бизнес-описание                             | Пример значения                   |
|-----------------------|---------------------------------------------|-----------------------------------|
| id                    | Идентификатор записи доступа                | "12345"                           |
| integration_stream_id | Идентификатор записи интеграционного потока | "1234"                            |
| identification        | Идентифицирующая информация внешней системы | {"token": "adsfadsfadsfasdfasdf"} |


**Мониторинг интеграционного потока (NotificationIntegrationStream)**

| Поле                  | Бизнес-описание                                                                                      | Пример значения   |
|-----------------------|------------------------------------------------------------------------------------------------------|-------------------|
| id                    | Идентификатор записи мониторинга                                                                     | "123456"          |
| integration_stream_id | Идентификатор записи интеграционного потока                                                          | "1234"            |
| message_count         | Количество сообщений для уведомления                                                                 | "100"             |
| period                | Период в секундах в течении которого количество сообщений не должно превышать установленное значение | "60"              |
| email                 | Email для отправки уведомления                                                                       | "support@bank.ru" |


#### 2. Бизнес-функции (методы)
**CRUDS для интеграционного потока**
1. **`integration.stream.create`** - Создание интеграционного потока
    - *Бизнес-правило*: Только ИТ-специалисты сопровождения могут создавать интеграционный поток 

2. **`integration.stream.update`** - Обновление интеграционного потока
    - *Бизнес-правило*: Только ИТ-специалисты сопровождения могут обновлять интеграционный поток

3. **`integration.stream.read`** - Получение интеграционного потока
    - *Бизнес-правило*: Только ИТ-специалисты сопровождения могут получать интеграционный поток

4. **`integration.stream.delete`** - Удаление интеграционного потока
    - *Бизнес-правило*: Только ИТ-специалисты сопровождения могут создавать интеграционный поток

5. **`integration.stream.search`** - Поиск интеграционного потока
    - *Бизнес-правило*: Только ИТ-специалисты сопровождения могут выполнять поиск интеграционных потоков
    - *Бизнес-логика*: Возвращает интеграционные потоки согласно фильтра
    - *Фильтры*: По классу, методу, активности, типу транспорта

**Специальные методы**
6. **`integration.stream.accessible`** - Получение описания доступных интеграционных потоков 
    - *Бизнес-правило*: Только пользователи внешние системы могут запрашивать о доступных интеграционных процессах
    - *Бизнес-логика*: Возвращает интеграционные потоки доступные пользователю внешней систему

7. **`integration.stream.enable`** - Включение интеграционного потока
   - *Бизнес-правило*: Только ИТ-специалисты сопровождения могут включать интеграционный поток

8. **`integration.stream.disable`** - Выключение интеграционного потока
   - *Бизнес-правило*: Только ИТ-специалисты сопровождения могут выключать интеграционный поток



**CRUD для доступа к интеграционному потоку**
1. **`access.to.integration.stream.create`** - Создание записи доступа к интеграционному потоку
    - *Бизнес-правило*: Только ИТ-специалисты сопровождения могут создавать записи доступа к интеграционному потоку

2. **`access.to.integration.stream.update`** - Обновление записи доступа к интеграционному потоку
    - *Бизнес-правило*: Только ИТ-специалисты сопровождения могут обновлять записи доступа к интеграционному потоку

3. **`access.to.integration.stream.read`** - Получение записи доступа к интеграционному потоку
    - *Бизнес-правило*: Только ИТ-специалисты сопровождения могут получать записи доступа к интеграционному потоку

4. **`access.to.integration.stream.delete`** - Удаление записи доступа к интеграционному потоку
    - *Бизнес-правило*: Только ИТ-специалисты сопровождения могут создавать записи доступа к интеграционному потоку

**CRUD для мониторинга к интеграционному потоку**
1. **`notification.integration.stream.create`** - Создание записи мониторинга интеграционного потока
    - *Бизнес-правило*: Только ИТ-специалисты сопровождения могут создавать мониторинга интеграционного потока

2. **`notification.integration.stream.update`** - Обновление записи мониторинга интеграционного потока
    - *Бизнес-правило*: Только ИТ-специалисты сопровождения могут обновлять мониторинга интеграционного потока

3. **`notification.integration.stream.read`** - Получение записи мониторинга интеграционного потока
    - *Бизнес-правило*: Только ИТ-специалисты сопровождения могут получать мониторинга интеграционного потока

4. **`notification.integration.stream.delete`** - Удаление записи мониторинга интеграционного потока
    - *Бизнес-правило*: Только ИТ-специалисты сопровождения могут создавать мониторинга интеграционного потока


#### 3. Бизнес-правила
1. **Видимость интеграционных процессов**:
    - `administrative`: Видимость всех интеграционных процессов ИТ-специалистам сопровождения
    - `self`: Для внешней системы видимость интеграционных процессов согласно установленному доступу 
2. **Видимость доступов к интеграционным процессам**:
    - `administrative`: Видимость всех доступов к интеграционным процессам ИТ-специалистам сопровождения
3. **Видимость мониторинга интеграционных процессов**:
    - `administrative`: Видимость всего мониторинга интеграционных процессов ИТ-специалистам сопровождения

#### 4. Бизнес-метрики успеха
1. **Управление интеграционными потоками**: ИТ-специалисты сопровождения могут всецело управлять интеграционными потоками
2. **Взаимодействие внешних систем с платформой**: Внешние системы успешно получают информацию о доступных интеграционных потоках
3. **Обработка сообщений от внешних систем**: Внешние системы успешно отправляют сообщения в доступные интеграционные потоки, сервис отправляет их на исполнение в "Древний монолит" и формирует ответы для внешней системы
4. **Фиксируются избыточные обращения к платформе**: ИТ-специалисты сопровождения получают своевременно информацию об избыточных обращениях к платформе  